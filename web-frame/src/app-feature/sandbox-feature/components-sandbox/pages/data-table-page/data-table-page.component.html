<form (submit)="searchForProducts()">
  <label>
    <span>{{ 'Name' }}</span>&nbsp;
    <input [(ngModel)]="search" name="search" type="text">
  </label>
  <input type="submit" value="Search">
</form>

<table>
  <thead>
    <tr>
      <th *ngFor="let column of displayedColumns"
          [ngClass]="{ clickable: column == sortQuery.column }"
          (click)="sortChanged(column)">
        {{column}}
        <span *ngIf="column == sortQuery.column">
          <ng-container *ngIf="sortQuery.direction == ''">&nbsp;</ng-container>
          <ng-container *ngIf="sortQuery.direction == 'asc'">^</ng-container>
          <ng-container *ngIf="sortQuery.direction == 'desc'">v</ng-container>
        </span>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr *ngIf="isLoading | async">
      <td [attr.colspan]="displayedColumns.length">
        {{ 'Loading...' }}
      </td>
    </tr>
    <tr *ngFor="let row of (dataSource | async)?.results">
      <td *ngFor="let column of displayedColumns">{{row[column]}}</td>
    </tr>
  </tbody>
</table>

<input type="button" value="prev" (click)="pageChange(pageIndex - 1)">
{{pageIndex}}
<input type="button" value="next" (click)="pageChange(pageIndex + 1)">
<select (change)="pageSizeChange($event.target.value)">
    <option value="3">3</option>
    <option value="6">6</option>
    <option value="9">9</option>
    <option value="12">12</option>
  </select>
<br>
{{(dataSource | async)?.totalCount}} total
